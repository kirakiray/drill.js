//! drill.js - v5.0.6 https://github.com/kirakiray/drill.js  (c) 2018-2023 YAO
const t={},e=(e,s)=>{if(e instanceof Function&&(s=e,e=["js","mjs"]),e instanceof Array)return void e.forEach((e=>{(t[e]||(t[e]=[])).push(s)}));(t[e]||(t[e]=[])).push(s)};e(["mjs","js"],(({url:t,params:e})=>{const s=new URL(t);return e.includes("-direct")?import(t):import(`${s.origin}${s.pathname}`)})),e(["txt","html"],(({url:t})=>fetch(t).then((t=>t.text())))),e("json",(async({url:t})=>fetch(t).then((t=>t.json())))),e("wasm",(async({url:t})=>{const e=await fetch(t).then((t=>t.arrayBuffer())),s=await WebAssembly.compile(e);return new WebAssembly.Instance(s).exports}));const s=Symbol("loaded"),n=async(e,n)=>{const i=new URL(e),{pathname:r}=i,a=r.slice(2+(r.lastIndexOf(".")-1>>>0));let o;const c=t[a];if(c)for(let t of c){const s=await t({url:e,data:o,...n});void 0!==s&&(o=s)}else o=fetch(e);if(n&&n.element){const{element:t}=n;t[s]=!0;const e=new Event("load");t.dispatchEvent(e)}return o};function i(t){return(t=>(t||(t={url:document.location.href}),e=>{let s="";const[i,...r]=e.split(" ");if(t.resolve)s=t.resolve(i);else{const e=new URL(t.url);s=new URL(i,e).href}return n(s,{params:r})}))(t)}Object.assign(i,{use:e});class r extends HTMLElement{constructor(...t){super(...t),this[s]=!1,Object.defineProperties(this,{loaded:{get:()=>this[s]}}),this._init()}_init(){if(this.__initSrc||this.attributes.hasOwnProperty("pause"))return;let t=this.getAttribute("src");if(!t)return;this.__initSrc=t,t=new URL(t,location.href).href,Object.defineProperties(this,{src:{configurable:!0,value:t}});const[e,...s]=t.split(" ");n(e,{element:this,params:s})}attributeChangedCallback(t,e,s){"src"===t?s&&null===e?this._init():this.__initSrc&&e&&s!==this.__initSrc&&(console.warn(`${this.tagName.toLowerCase()} change src is invalid, only the first change will be loaded`),this.setAttribute("src",this.__initSrc)):"pause"===t&&null===s&&this._init()}static get observedAttributes(){return["src","pause"]}}customElements.define("load-module",r),customElements.define("l-m",class extends r{constructor(...t){super(...t)}}),"undefined"!=typeof window&&(window.lm=i);export{i as default};
//# sourceMappingURL=drill.min.mjs.map
